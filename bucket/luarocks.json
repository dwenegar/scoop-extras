{
    "homepage": "https://github.com/luarocks/luarocks",
    "version": "3.3.1",
    "license": "MIT License",
    "notes": "Configure luarocks by copying: \"$dir\\luarocks-config.lua\" to \"$env:APPDATA\\luarocks\"",
    "bin": [
        "luarocks.exe",
        "luarocks-admin.exe"
    ],
    "url": [
        "http://luarocks.github.io/luarocks/releases/luarocks-3.3.1-windows-32.zip",
        "http://raw.githubusercontent.com/dwenegar/scoop-extras/master/scripts/luarocks-config.lua"
    ],
    "hash": [
        "2f1fbdc79118155790bb7c459dc51f9832360b7268e328db777ab98ee7341a5a",
        "35eda43d05adee1aae6eb98514bb8f4b7c6ebfb017b2eafbcd55717049d3e137"
    ],
    "checkver": "github",
    "autoupdate": {
        "url": "http://luarocks.github.io/luarocks/releases/luarocks-$version-windows-32.zip",
        "extract_dir": "luarocks-$version-windows-32"
    },
    "env_set": {
        "LUA_PATH": "%APPDATA%\\luarocks\\share\\lua\\5.3\\?.lua;%APPDATA%\\luarocks\\share\\lua\\5.3\\?\\init.lua;.\\?.lua;.\\?\\init.lua",
        "LUA_CPATH": "%APPDATA%\\luarocks\\lib\\lua\\5.3\\?.dll;.\\?.dll"
    },
    "extract_dir": "luarocks-3.3.1-windows-32",
    "depends": "lua",
    "installer": {
        "script": [
            "if(-not (Test-Path(\"$env:APPDATA\\luarocks\"))) {",
            "  mkdir \"$env:APPDATA\\luarocks\"",
            "}",
            "add_first_in_path \"$env:APPDATA\\luarocks\\bin\" $global"
        ]
    },
    "uninstaller": {
        "script": "remove_from_path \"$env:APPDATA\\luarocks\\bin\" $global"
    },
    "post_install": [
        "if(Test-Path(\"$dir\\luarocks-config.lua\")) {",
        "  $content = Get-Content \"$dir\\luarocks-config.lua\"",
        "  $content = $content.Replace('$scoopdir', $scoopdir)",
        "  $content | Set-Content \"$dir\\luarocks-config.lua\"",
        "}"
    ]
}
